@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Shattered Pixel Dungeon-ish UI
   + "Прокляті Кургани" accents (ornament only in labels)
   No heavy images, no filters.
   ========================= */

:root {
  --radius: 6px;

  /* base palette (rgb triplets) */
  --spd-bg: 14 12 10;          /* #0e0c0a */
  --spd-panel: 28 22 18;       /* #1c1612 */
  --spd-panel-2: 23 18 15;

  --spd-frame: 111 106 99;     /* #6f6a63 */
  --spd-frame-hi: 185 178 166; /* #b9b2a6 */
  --spd-frame-lo: 43 36 30;    /* #2b241e */

  --spd-text: 232 226 216;     /* #e8e2d8 */
  --spd-text-dim: 185 173 156; /* #b9ad9c */
  --spd-text-outline: 10 9 8;

  --spd-gold: 214 177 74;      /* #d6b14a */
  --spd-hp-red: 193 43 43;     /* #c12b2b */
  --spd-mana-blue: 56 122 199;
  --spd-poison-green: 79 191 107;
  --spd-thread-red: 193 43 43;
  --spd-turq: 43 192 199;

  /* map shadcn tokens to SPD palette */
  --background: var(--spd-bg);
  --foreground: var(--spd-text);
  --card: var(--spd-panel);
  --card-foreground: var(--spd-text);
  --popover: var(--spd-panel);
  --popover-foreground: var(--spd-text);
  --muted: var(--spd-panel-2);
  --muted-foreground: var(--spd-text-dim);
  --border: var(--spd-frame);
  --input: var(--spd-frame);
  --ring: var(--spd-gold);

  --primary: var(--spd-thread-red);
  --primary-foreground: var(--spd-text);
  --secondary: var(--spd-turq);
  --secondary-foreground: 14 12 10;
  --accent: var(--spd-gold);
  --accent-foreground: 14 12 10;
  --destructive: var(--spd-hp-red);
  --destructive-foreground: var(--spd-text);
}

html, body { height: 100%; }

body {
  margin: 0;
  color: rgb(var(--spd-text));
  font-family: "Rubik", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  letter-spacing: 0.02em;
  -webkit-font-smoothing: auto;
  -moz-osx-font-smoothing: auto;
  text-rendering: geometricPrecision;
  background: rgb(var(--spd-bg));
}

* { -webkit-tap-highlight-color: transparent; }

/* Optional: pixel font for titles/labels only (requires Google Fonts in index.html) */
.pixel {
  font-family: "Press Start 2P", ui-monospace, monospace;
  letter-spacing: 0.04em;
}

/* ========== Safe area utilities ========== */
.safe { padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); }
.safe-top { padding-top: env(safe-area-inset-top); }
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
.safe-x { padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right); }

/* ========== Background pattern ========== */
.spd-bg {
  background-color: rgb(var(--spd-bg));
  background-image:
    linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.08)),
    radial-gradient(circle at 15% 10%, rgba(255,255,255,0.03), transparent 55%),
    radial-gradient(circle at 85% 80%, rgba(0,0,0,0.35), transparent 55%),
    repeating-linear-gradient(0deg, rgba(0,0,0,0.06) 0px, rgba(0,0,0,0.06) 1px, rgba(0,0,0,0) 1px, rgba(0,0,0,0) 4px),
    repeating-linear-gradient(90deg, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.02) 1px, rgba(0,0,0,0) 1px, rgba(0,0,0,0) 7px);
}

.spd-bg::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.08;
  background-image:
    repeating-linear-gradient(45deg, rgba(255,255,255,0.06) 0 1px, rgba(0,0,0,0) 1px 3px),
    repeating-linear-gradient(-45deg, rgba(0,0,0,0.06) 0 1px, rgba(0,0,0,0) 1px 4px);
  mix-blend-mode: overlay;
}

/* ========== Frames / bevels ========== */
.spd-frame { position: relative; border: 2px solid rgb(var(--spd-frame)); border-radius: var(--radius); }
.spd-frame::before {
  content: '';
  position: absolute;
  inset: 2px;
  border: 1px solid rgba(185,178,166,0.25);
  border-radius: calc(var(--radius) - 2px);
  pointer-events: none;
}
.spd-panel { background: rgb(var(--spd-panel)); border-radius: var(--radius); }

.spd-bevel-inset {
  box-shadow:
    inset 1px 1px 0 rgba(43,36,30,0.75),
    inset -1px -1px 0 rgba(185,178,166,0.22);
}
.spd-bevel-raised {
  box-shadow:
    inset 1px 1px 0 rgba(185,178,166,0.22),
    inset -1px -1px 0 rgba(43,36,30,0.80),
    0 1px 0 rgba(0,0,0,0.35);
}

.spd-divider { height: 1px; background: rgba(185,173,156,0.18); }

/* ========== Label w/ ornament (ONLY here) ========== */
.spd-label {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  border-radius: 4px;
  background: rgba(0,0,0,0.22);
  border: 1px solid rgba(111,106,99,0.7);
}
.spd-label::after {
  content: '';
  display: inline-block;
  width: 56px;
  height: 6px;
  opacity: 0.85;
  background-repeat: repeat-x;
  background-size: 56px 6px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='56' height='6' viewBox='0 0 56 6'%3E%3Cpath d='M0 3H56' stroke='%23c12b2b' stroke-width='1'/%3E%3Cpath d='M6 0l3 3-3 3M18 0l3 3-3 3M30 0l3 3-3 3M42 0l3 3-3 3' fill='none' stroke='%23c12b2b' stroke-width='1'/%3E%3C/svg%3E");
}

/* text outline */
.text-outline-2 {
  text-shadow:
    -1px 0 rgb(var(--spd-text-outline)),
    1px 0 rgb(var(--spd-text-outline)),
    0 -1px rgb(var(--spd-text-outline)),
    0 1px rgb(var(--spd-text-outline)),
    -1px -1px rgb(var(--spd-text-outline)),
    1px 1px rgb(var(--spd-text-outline));
}
.text-outline-3 {
  text-shadow:
    -1px 0 rgb(var(--spd-text-outline)),
    1px 0 rgb(var(--spd-text-outline)),
    0 -1px rgb(var(--spd-text-outline)),
    0 1px rgb(var(--spd-text-outline)),
    -1px -1px rgb(var(--spd-text-outline)),
    1px 1px rgb(var(--spd-text-outline)),
    -2px 0 rgb(var(--spd-text-outline)),
    2px 0 rgb(var(--spd-text-outline)),
    0 -2px rgb(var(--spd-text-outline)),
    0 2px rgb(var(--spd-text-outline));
}

/* slots */
.pixel-crisp, .pixel-crisp * { image-rendering: pixelated; }
.spd-slot {
  position: relative;
  border-radius: 6px;
  border: 2px solid rgb(var(--spd-frame));
  background: rgb(var(--spd-panel-2));
  box-shadow: inset 1px 1px 0 rgba(185,178,166,0.16), inset -1px -1px 0 rgba(43,36,30,0.85);
}
.spd-slot--rare { border-color: rgb(var(--spd-turq)); }
.spd-slot--epic { border-color: rgb(var(--spd-poison-green)); }
.spd-slot--legend { border-color: rgb(var(--spd-gold)); }